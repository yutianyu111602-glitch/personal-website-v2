# ğŸ¨ é¢„è®¾æ•ˆæœå‚æ•°ç³»ç»Ÿå®Œæ•´æ¢³ç†æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

**ç›®æ ‡**: å®Œå…¨æ¢³ç†ç°æœ‰é¢„è®¾ã€æ•ˆæœå’Œå‚æ•°ç³»ç»Ÿï¼Œç†æ¸…è·¯ç”±å’Œå‚æ•°å…³ç³»
**èŒƒå›´**: æ¶µç›–LiquidMetalã€UniverseEntropyã€Technoé¢„è®¾ã€æƒ…ç»ªç³»ç»Ÿç­‰æ‰€æœ‰ç›¸å…³æ¨¡å—
**æ¶æ„**: åŸºäºç°æœ‰ä»£ç æ·±åº¦åˆ†æï¼Œæ•´ç†æˆæ¸…æ™°çš„ç³»ç»Ÿæ¶æ„å›¾

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ€»è§ˆ

### ğŸ”„ æ ¸å¿ƒæ•°æ®æµ
```
æƒ…ç»ªæ ¸å¿ƒ â†’ éšæœºç®—æ³• â†’ é¢„è®¾é€‰æ‹© â†’ æ•ˆæœæ¸²æŸ“ â†’ è§†è§‰è¾“å‡º
    â†“           â†“         â†“         â†“         â†“
EmotionCore â†’ RandomState â†’ Preset â†’ Effect â†’ Renderer
    â†“           â†“         â†“         â†“         â†“
äº‹ä»¶æ€»çº¿ â†’ çŠ¶æ€ç®¡ç† â†’ æ ‡ç­¾åŒ¹é… â†’ èŠ‚ç‚¹ç¼–æ’ â†’ WebGLæ¸²æŸ“
```

### ğŸ¯ ç³»ç»Ÿå±‚æ¬¡ç»“æ„
1. **æƒ…ç»ªå±‚**: EmotionCoreManager - ç»Ÿä¸€æƒ…ç»ªç®¡ç†
2. **ç®—æ³•å±‚**: RandomStateManager - æ™ºèƒ½éšæœºæ€§æ§åˆ¶
3. **é¢„è®¾å±‚**: LiquidMetalPresets + TechnoPresets - 60+é¢„è®¾ç³»ç»Ÿ
4. **æ•ˆæœå±‚**: BlendPipeline + EffectNodes - æ¸²æŸ“èŠ‚ç‚¹ç¼–æ’
5. **æ¸²æŸ“å±‚**: WebGLæ¸²æŸ“å™¨ - æœ€ç»ˆè§†è§‰è¾“å‡º

---

## ğŸ² é¢„è®¾ç³»ç»Ÿæ¶æ„

### ğŸ“Š LiquidMetalé¢„è®¾ç³»ç»Ÿ (60+é¢„è®¾)

#### ğŸ”§ é¢„è®¾æ ‡ç­¾ç»“æ„
```typescript
interface Preset {
  id: string;
  tags: {
    // æ ¸å¿ƒå±æ€§
    metalScore: number;      // 0..1 é“¶è‰²å¥‘åˆåº¦
    energyBias: number;      // -1..+1 èƒ½é‡åç½®
    valenceBias: number;     // -1..+1 æ•ˆä»·åç½®
    arousalBias: number;     // 0..1 æ¿€æ´»åç½®
    
    // è§†è§‰æ•ˆæœ
    hueShiftRisk: number;    // 0..1 è‰²åé£é™©
    specularBoost: number;   // 0..1 é«˜å…‰å¼ºåŒ–
    rippleAffinity: number;  // 0..1 æµåŠ¨äº²å’Œ
    
    // æ€§èƒ½æ§åˆ¶
    cost: number;            // 1..5 æ€§èƒ½ä»£ä»·
    
    // æ‰©å±•å±æ€§
    flowAffinity?: number;   // 0..1 å¯¹æµåœºå–œå¥½
    organicAffinity?: number;// 0..1 æœ‰æœºå›¾æ ·å–œå¥½
    fractureAffinity?: number;// 0..1 ç¢è£‚æ•ˆæœå–œå¥½
  };
}
```

#### ğŸ¨ é¢„è®¾åˆ†ç±»ä½“ç³»
1. **åŸºç¡€é“¶è‰²é¢„è®¾** (metalScore: 0.8-1.0)
   - `liquid_metal_polish` - é«˜å…‰é“¶è‰²
   - `liquid_metal_carve` - é›•åˆ»é“¶è‰²
   - `liquid_metal_flow` - æµåŠ¨é“¶è‰²

2. **é«˜èƒ½é¢„è®¾** (energyBias: 0.5-1.0)
   - `high_energy_blast` - é«˜èƒ½çˆ†ç‚¸
   - `rhythmic_pulse` - èŠ‚å¥è„‰å†²

3. **æƒ…ç»ªé¢„è®¾** (åŸºäºvalence/arousal)
   - `calm_reflection` - å¹³é™åå°„
   - `gentle_ripple` - æ¸©æŸ”æ¶Ÿæ¼ª
   - `organic_growth` - æœ‰æœºç”Ÿé•¿

4. **æŠ€æœ¯é¢„è®¾** (ç‰¹æ®Šæ•ˆæœ)
   - `reaction_diffusion` - ååº”æ‰©æ•£
   - `crystalline_break` - æ™¶ä½“ç ´ç¢
   - `worley_cells` - Worleyç»†èƒ

### ğŸµ Technoé¢„è®¾ç³»ç»Ÿ (5å¥—æ ¸å¿ƒé¢„è®¾)

#### ğŸ¯ é¢„è®¾é…ç½®ç»“æ„
```typescript
interface TechnoPreset {
  limits: {
    bpmSoftLo: number;      // BPMä¸‹é™
    bpmSoftHi: number;      // BPMä¸Šé™
    bpmIdeal: number;       // ç†æƒ³BPM
    bpmTol: number;         // BPMå®¹å·®
    maxStretchPct: number;  // æœ€å¤§æ‹‰ä¼¸ç™¾åˆ†æ¯”
  };
  transition: {
    technoCrossfadeBeats: number; // äº¤å‰æ·¡å…¥æ·¡å‡ºæ‹æ•°
  };
  weights: {
    vocal?: number;         // äººå£°æƒé‡
    energy?: number;        // èƒ½é‡æƒé‡
    tempo?: number;         // é€Ÿåº¦æƒé‡
    phrase?: number;        // çŸ­è¯­æƒé‡
  };
}
```

#### ğŸµ é¢„è®¾è¯¦ç»†é…ç½®
1. **deep_minimal** (122-126 BPM)
   - 32æ‹é•¿å±‚å ï¼Œä½äººå£°ï¼Œå¹³æ»‘èƒ½é‡
   - é€‚åˆæ·±å¤œ/æç®€é£æ ¼

2. **classic** (126-130 BPM)
   - 24æ‹crossfade + ä½é¢‘äº¤æ¥
   - ä¸‡èƒ½ç¨³æ€ï¼Œé»˜è®¤æ¨è

3. **peak_warehouse** (128-134 BPM)
   - çŸ­è¯­è¾¹ç•Œåˆ‡æ¢ï¼Œèƒ½é‡æ¨è¿›
   - é€‚åˆé«˜å³°æ—¶æ®µ

4. **hard_techno** (140-150 BPM)
   - 8-12æ‹ï¼Œbass killâ†’swap
   - å†²å‡»/å¿«é€Ÿé£æ ¼

5. **hypnotic** (130-134 BPM)
   - 32æ‹è¶…é•¿å±‚å ï¼Œçº¹ç†æµåŠ¨
   - å‚¬çœ /æµåŠ¨é£æ ¼

---

## ğŸ­ æ•ˆæœç³»ç»Ÿæ¶æ„

### ğŸ”„ BlendPipelineæ¸²æŸ“ç®¡çº¿

#### ğŸ“Š èŠ‚ç‚¹ç±»å‹å®šä¹‰
```typescript
type BlendID = 
  | 'LumaSoftOverlay' | 'SMix' | 'BoundedDodge' | 'SoftBurn'
  | 'GrainMerge' | 'StructureMix' | 'BloomHL' | 'EdgeTint'
  | 'DualCurve' | 'TemporalTrail' | 'SpecularGrad' | 'OkLabLightness';

interface BlendNode {
  id: BlendID;
  weight: number;                     // 0..0.22ï¼ˆç³»ç»Ÿé™å¹…ï¼‰
  uniforms?: Record<string, number>;  // Shaderå‚æ•°
  category?: 'Base'|'Accent'|'Decor'; // èŠ‚ç‚¹åˆ†ç±»
}
```

#### ğŸ¯ èŠ‚ç‚¹åˆ†ç±»ç­–ç•¥
1. **BaseèŠ‚ç‚¹** (åŸºç¡€å±‚)
   - `LumaSoftOverlay` - äº®åº¦è½¯å åŠ 
   - `SMix` - ç®€å•æ··åˆ
   - `OkLabLightness` - äº®åº¦æ§åˆ¶

2. **AccentèŠ‚ç‚¹** (å¼ºè°ƒå±‚)
   - `BoundedDodge` - æœ‰ç•Œé—ªé¿
   - `SoftBurn` - è½¯ç‡ƒçƒ§
   - `StructureMix` - ç»“æ„æ··åˆ
   - `DualCurve` - åŒæ›²çº¿
   - `SpecularGrad` - é«˜å…‰æ¸å˜

3. **DecorèŠ‚ç‚¹** (è£…é¥°å±‚)
   - `GrainMerge` - é¢—ç²’åˆå¹¶
   - `BloomHL` - é«˜å…‰ç»½æ”¾
   - `EdgeTint` - è¾¹ç¼˜ç€è‰²
   - `TemporalTrail` - æ—¶é—´è½¨è¿¹

#### ğŸ”§ æ¸²æŸ“ç®¡çº¿é…ç½®
```typescript
interface BlendPipeline {
  nodes: BlendNode[];     // èŠ‚ç‚¹é¡ºåºå³é“¾è·¯é¡ºåº
  ttlMs: number;          // æœ‰æ•ˆæ—¶é•¿ï¼Œåˆ°ç‚¹é‡ç¼–æ’
  presetId?: string;      // å…³è”çš„é¢„è®¾ID
  extras?: Extras;        // å¯é€‰ç”Ÿæˆå™¨/è’™ç‰ˆ
}
```

### ğŸ¨ æ•ˆæœç”Ÿæˆå™¨ç³»ç»Ÿ

#### ğŸŒŠ æµåŠ¨æ•ˆæœ (Flow Effects)
```typescript
interface FlowExtras {
  id: 'CurlNoise' | 'StableFluid' | 'DomainWarp';
  intensity: number;
  speed: number;
  complexity: number;
}
```

#### ğŸ§¬ æœ‰æœºæ•ˆæœ (Organic Effects)
```typescript
interface OrganicExtras {
  id: 'Lenia' | 'ReactionDiffusion' | 'CellularAutomata';
  growthRate: number;
  mutationRate: number;
  patternComplexity: number;
}
```

#### ğŸ’¥ ç¢è£‚æ•ˆæœ (Fracture Effects)
```typescript
interface FractureExtras {
  id: 'Worley' | 'Voronoi' | 'FractalNoise';
  cellSize: number;
  distortion: number;
  edgeSharpness: number;
}
```

---

## ğŸš€ è·¯ç”±ç³»ç»Ÿæ¶æ„

### ğŸ”Œ äº‹ä»¶æ€»çº¿è·¯ç”±

#### ğŸ“¡ è·¨å‘½åç©ºé—´è·¯ç”±
```typescript
// å¯è§†åŒ– â†” æ··éŸ³ è·¯ç”±
'visualization:preset' â†’ ['automix:energy']
'automix:energy' â†’ ['visualization:effect']

// LiquidMetal â†” å¯è§†åŒ– è·¯ç”±
'liquidmetal:mood' â†’ ['visualization:preset', 'visualization:color']
'visualization:preset' â†’ ['liquidmetal:pipeline']

// å…¨å±€æ€§èƒ½äº‹ä»¶è·¯ç”±
'global:performance' â†’ ['visualization:effect', 'liquidmetal:pipeline']
```

#### ğŸ¯ äº‹ä»¶ç±»å‹å®šä¹‰
```typescript
type EventNamespace = 
  | 'global'           // å…¨å±€äº‹ä»¶
  | 'emotion'          // æƒ…ç»ªäº‹ä»¶
  | 'visualization'    // å¯è§†åŒ–äº‹ä»¶
  | 'liquidmetal'      // LiquidMetaläº‹ä»¶
  | 'automix'          // è‡ªåŠ¨æ··éŸ³äº‹ä»¶
  | 'random_emotion'   // éšæœºæƒ…ç»ªäº‹ä»¶
  | 'performance'      // æ€§èƒ½äº‹ä»¶
  | 'recovery';        // æ¢å¤äº‹ä»¶
```

#### ğŸ“Š æ ¸å¿ƒäº‹ä»¶ç±»å‹
1. **æƒ…ç»ªäº‹ä»¶**
   - `emotion:change` - æƒ…ç»ªå˜åŒ–
   - `emotion:randomness_update` - éšæœºæ€§æ›´æ–°

2. **å¯è§†åŒ–äº‹ä»¶**
   - `visualization:preset` - é¢„è®¾åˆ‡æ¢
   - `visualization:effect` - æ•ˆæœæ›´æ–°
   - `visualization:color` - é¢œè‰²å˜åŒ–

3. **LiquidMetaläº‹ä»¶**
   - `liquidmetal:mood` - æƒ…ç»ªçŠ¶æ€
   - `liquidmetal:pipeline` - æ¸²æŸ“ç®¡çº¿

4. **éšæœºäº‹ä»¶**
   - `random:seed_changed` - ç§å­å˜åŒ–
   - `random_emotion:integration_ready` - é›†æˆå°±ç»ª

### ğŸ”„ æ•°æ®æµè·¯ç”±

#### ğŸ“Š æƒ…ç»ªâ†’éšæœºæ€§è·¯ç”±
```
EmotionCoreManager â†’ RandomStateManager â†’ RandomnessControl
       â†“                    â†“                    â†“
   E/V/Aä¸‰å…ƒæƒ…ç»ª â†’ æƒ…ç»ªæ˜ å°„ç®—æ³• â†’ éšæœºæ€§å‚æ•°è°ƒæ•´
```

#### ğŸ¨ éšæœºæ€§â†’é¢„è®¾è·¯ç”±
```
RandomStateManager â†’ PresetRecommendation â†’ PresetSelection
       â†“                    â†“                    â†“
   éšæœºæ€§æ§åˆ¶ â†’ é¢„è®¾æ¨èç®—æ³• â†’ é¢„è®¾æ ‡ç­¾åŒ¹é…
```

#### ğŸ­ é¢„è®¾â†’æ•ˆæœè·¯ç”±
```
PresetSelection â†’ BlendPipeline â†’ EffectNodes â†’ WebGLRenderer
       â†“              â†“              â†“            â†“
   é¢„è®¾æ ‡ç­¾ â†’ èŠ‚ç‚¹æƒé‡è®¡ç®— â†’ èŠ‚ç‚¹ç¼–æ’ â†’ æœ€ç»ˆæ¸²æŸ“
```

---

## âš™ï¸ å‚æ•°ç³»ç»Ÿæ¶æ„

### ğŸ›ï¸ éšæœºæ€§æ§åˆ¶å‚æ•°

#### ğŸ”§ RandomnessControlæ¥å£
```typescript
interface RandomnessControl {
  baseRandomness: number;    // åŸºç¡€éšæœºæ€§ (0-1)
  emotionBias: number;       // æƒ…ç»ªåç½® (0-1)
  energyBias: number;        // èƒ½é‡åç½® (0-1)
  timeBias: number;          // æ—¶é—´åç½® (0-1)
  contrastBias: number;      // å¯¹æ¯”åº¦åç½® (0-1)
}
```

#### ğŸ¯ æƒ…ç»ªæ˜ å°„å‚æ•°
```typescript
interface EmotionRandomnessMapping {
  energy: {
    low: { randomness: number; entropy: number; presetBias: string[] };
    medium: { randomness: number; entropy: number; presetBias: string[] };
    high: { randomness: number; entropy: number; presetBias: string[] };
  };
  valence: {
    negative: { randomness: number; entropy: number; presetBias: string[] };
    neutral: { randomness: number; entropy: number; presetBias: string[] };
    positive: { randomness: number; entropy: number; presetBias: string[] };
  };
  arousal: {
    low: { randomness: number; entropy: number; presetBias: string[] };
    medium: { randomness: number; entropy: number; presetBias: string[] };
    high: { randomness: number; entropy: number; presetBias: string[] };
  };
}
```

### ğŸ¨ æ¸²æŸ“å‚æ•°ç³»ç»Ÿ

#### ğŸ“Š Uniformå‚æ•°æ˜ å°„
```typescript
interface UniformParams {
  // å…¨å±€å‚æ•°
  global: {
    iResolution: [number, number];    // åˆ†è¾¨ç‡
    iTime: number;                    // æ—¶é—´
    iMouse: [number, number];        // é¼ æ ‡ä½ç½®
    uEnergy: number;                  // èƒ½é‡
    uValence: number;                 // æ•ˆä»·
    uArousal: number;                 // æ¿€æ´»
    uPresetId: number;                // é¢„è®¾ID
  };
  
  // èŠ‚ç‚¹çº§å‚æ•°
  nodes: Record<string, {
    weight: number;                   // æƒé‡
    blendMode: string;                // æ··åˆæ¨¡å¼
    opacity: number;                  // é€æ˜åº¦
    scale: number;                    // ç¼©æ”¾
    rotation: number;                 // æ—‹è½¬
  }>;
}
```

#### ğŸ­ æ•ˆæœå‚æ•°æ§åˆ¶
```typescript
interface EffectParams {
  // åŸºç¡€æ•ˆæœ
  base: {
    brightness: number;               // äº®åº¦
    contrast: number;                 // å¯¹æ¯”åº¦
    saturation: number;               // é¥±å’Œåº¦
    hue: number;                      // è‰²ç›¸
  };
  
  // é«˜çº§æ•ˆæœ
  advanced: {
    blur: number;                     // æ¨¡ç³Š
    sharpen: number;                  // é”åŒ–
    noise: number;                    // å™ªç‚¹
    distortion: number;               // æ‰­æ›²
  };
  
  // åŠ¨ç”»æ•ˆæœ
  animation: {
    speed: number;                    // é€Ÿåº¦
    amplitude: number;                // æŒ¯å¹…
    frequency: number;                // é¢‘ç‡
    phase: number;                    // ç›¸ä½
  };
}
```

---

## ğŸ”§ é…ç½®ç³»ç»Ÿæ¶æ„

### ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

#### ğŸ¯ data-config.json
```json
{
  "visualizer": {
    "overlay": {
      "blendMode": "screen",
      "opacity": 0.85,
      "highFps": true
    }
  },
  "layout": {
    "focus": {
      "organizer": { "width": 560, "height": 72 },
      "taskLogger": { "width": 224 }
    }
  },
  "featureFlags": {
    "emotionCoreUnifiedLoop": true,
    "enableTechniqueBridge": true
  },
  "emotionCore": {
    "tickIntervalMs": 500,
    "enableTechniqueBridge": true,
    "conservativeDropout": 0.05
  },
  "aidjMix": {
    "enableTechniqueBridge": true,
    "enableRouterAdapter": false,
    "enableNowPlayingMirror": true,
    "routerConfig": {
      "ENDPOINT_NEXT": "/api/music/next",
      "ENDPOINT_PREV": "/api/music/previous",
      "ENDPOINT_CROSSF": "/api/music/crossfade?duration={ms}",
      "ENDPOINT_VOLUME": "/api/music/volume?level={v}",
      "DEFAULT_CROSSFADE_MS": 4000,
      "SAFETY_RATE_LIMIT_MS": 1200
    },
    "mirrorConfig": {
      "NOWPLAYING_URL": "/api/nowplaying",
      "INTERVAL_MS": 2000
    }
  }
}
```

#### ğŸŒ ç¯å¢ƒå˜é‡é…ç½®
```typescript
// Viteç¯å¢ƒå˜é‡
VITE_MUSIC_BASE_URL: string;         // éŸ³ä¹æœåŠ¡åŸºç¡€åœ°å€
VITE_BUS_SYNC_ENABLED: boolean;      // äº‹ä»¶æ€»çº¿è·¨çª—å£åŒæ­¥
VITE_EMOTION_THEME_ENABLED: boolean; // æƒ…ç»ªä¸»é¢˜ä¸æ•ˆæœç®¡ç†å™¨
VITE_AUTOPILOT_ENABLED: boolean;     // æ— äººåŒ–ç¼–æ’å¼€å…³
VITE_TERMUSIC_PORT: number;          // Termusicä»£ç†ç«¯å£

// æœåŠ¡ç«¯ç¯å¢ƒå˜é‡
PORT: number;                         // æœ¬åœ°éŸ³ä¹æœåŠ¡å™¨ç«¯å£
MUSIC_DIR: string;                    // éŸ³ä¹æ ¹ç›®å½•
PLAYLIST_FILE: string;                // æ­Œå•æ–‡ä»¶è·¯å¾„
```

### ğŸ›ï¸ è¿è¡Œæ—¶é…ç½®

#### ğŸ”§ äº‹ä»¶æ€»çº¿é…ç½®
```typescript
interface EventBusConfig {
  enableLogging: boolean;             // å¯ç”¨æ—¥å¿—
  maxListeners: number;               // æœ€å¤§ç›‘å¬å™¨æ•°é‡
  eventHistorySize: number;           // äº‹ä»¶å†å²å¤§å°
  enableCrossNamespaceRouting: boolean; // å¯ç”¨è·¨å‘½åç©ºé—´è·¯ç”±
}
```

#### ğŸ“Š é€Ÿç‡é™åˆ¶é…ç½®
```typescript
// é»˜è®¤é€Ÿç‡é™åˆ¶
'automix:bpm' â†’ 250ms throttle       // BPMäº‹ä»¶èŠ‚æµ
'automix:energy' â†’ 250ms throttle    // èƒ½é‡äº‹ä»¶èŠ‚æµ
'global:performance' â†’ 500ms throttle // æ€§èƒ½äº‹ä»¶èŠ‚æµ
'visualization:effect' â†’ 250ms debounce // æ•ˆæœäº‹ä»¶å»æŠ–
```

---

## ğŸ¯ æ™ºèƒ½æ§åˆ¶ç®—æ³•

### ğŸ§  æƒ…ç»ªé©±åŠ¨ç®—æ³•

#### ğŸ“Š æƒ…ç»ªâ†’éšæœºæ€§æ˜ å°„
```typescript
function mapEmotionToRandomness(energy: number, valence: number, arousal: number): RandomnessParams {
  // èƒ½é‡æ˜ å°„: 0.2-1.0
  const energyRandomness = energy * 0.8 + 0.2;
  
  // æ•ˆä»·æ˜ å°„: 0.4-1.0
  const valenceRandomness = (valence + 1) * 0.3 + 0.4;
  
  // æ¿€æ´»æ˜ å°„: 0.2-0.8
  const arousalRandomness = arousal * 0.6 + 0.2;
  
  // ç»¼åˆè®¡ç®—
  return {
    baseRandomness: (energyRandomness + valenceRandomness + arousalRandomness) / 3,
    emotionBias: 0.6,
    energyBias: energyRandomness,
    timeBias: 0.1,
    contrastBias: 0.2
  };
}
```

#### ğŸ¨ é¢„è®¾æ¨èç®—æ³•
```typescript
function recommendPresets(emotion: EmotionState): PresetRecommendation[] {
  const recommendations: PresetRecommendation[] = [];
  
  // åŸºäºèƒ½é‡æ¨è
  if (emotion.energy > 0.7) {
    recommendations.push(...HIGH_ENERGY_PRESETS);
  } else if (emotion.energy < 0.3) {
    recommendations.push(...LOW_ENERGY_PRESETS);
  } else {
    recommendations.push(...MEDIUM_ENERGY_PRESETS);
  }
  
  // åŸºäºæ•ˆä»·æ¨è
  if (emotion.valence > 0.3) {
    recommendations.push(...POSITIVE_PRESETS);
  } else if (emotion.valence < -0.3) {
    recommendations.push(...NEGATIVE_PRESETS);
  }
  
  return recommendations.slice(0, 5); // è¿”å›å‰5ä¸ªæ¨è
}
```

### ğŸ”„ è‡ªé€‚åº”ç®—æ³•

#### ğŸ² è‡ªé€‚åº”ç§å­è°ƒæ•´
```typescript
function adjustSeedAdaptively(emotion: EmotionState, performance: PerformanceMetrics): number {
  let seedAdjustment = 0;
  
  // åŸºäºæƒ…ç»ªå˜åŒ–è°ƒæ•´
  const emotionChange = calculateEmotionChange(emotion);
  seedAdjustment += emotionChange * 0.3;
  
  // åŸºäºæ€§èƒ½è°ƒæ•´
  if (performance.fps < 30) {
    seedAdjustment -= 0.2; // é™ä½éšæœºæ€§
  }
  
  // åŸºäºæ—¶é—´è°ƒæ•´
  const timeAdjustment = Math.sin(Date.now() / 60000) * 0.1;
  seedAdjustment += timeAdjustment;
  
  return Math.max(-0.5, Math.min(0.5, seedAdjustment));
}
```

#### ğŸ¯ æ€§èƒ½ä¿æŠ¤ç®—æ³•
```typescript
function updatePerformanceGuard(performance: PerformanceMetrics): void {
  const { fps, memoryUsage, cpuUsage } = performance;
  
  // æ€§èƒ½ä¸‹é™æ—¶é™ä½éšæœºæ€§
  if (fps < 30 || memoryUsage > 0.8 || cpuUsage > 0.8) {
    const reducedRandomness = MIN_RANDOMNESS_LEVEL;
    
    updateRandomnessControl({
      baseRandomness: reducedRandomness,
      emotionBias: 0.3, // é™ä½æƒ…ç»ªå½±å“
      energyBias: 0.2,
      timeBias: 0.1,
      contrastBias: 0.1
    });
  }
}
```

---

## ğŸ“Š ç³»ç»Ÿç›‘æ§ä¸è¯Šæ–­

### ğŸ” æ€§èƒ½ç›‘æ§æŒ‡æ ‡

#### ğŸ“ˆ æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡
```typescript
interface PerformanceMetrics {
  fps: number;                        // å¸§ç‡
  memoryUsage: number;                // å†…å­˜ä½¿ç”¨ç‡
  cpuUsage: number;                   // CPUä½¿ç”¨ç‡
  renderTime: number;                 // æ¸²æŸ“æ—¶é—´
  eventQueueLength: number;           // äº‹ä»¶é˜Ÿåˆ—é•¿åº¦
  presetSwitchCount: number;          // é¢„è®¾åˆ‡æ¢æ¬¡æ•°
  errorCount: number;                 // é”™è¯¯è®¡æ•°
}
```

#### ğŸ¯ è´¨é‡ç›‘æ§æŒ‡æ ‡
```typescript
interface QualityMetrics {
  presetAccuracy: number;             // é¢„è®¾æ¨èå‡†ç¡®ç‡
  randomnessQuality: number;          // éšæœºæ€§è´¨é‡
  emotionResponseTime: number;        // æƒ…ç»ªå“åº”æ—¶é—´
  presetCoordinationScore: number;    // é¢„è®¾åè°ƒåˆ†æ•°
  userSatisfaction: number;           // ç”¨æˆ·æ»¡æ„åº¦
}
```

### ğŸš¨ é”™è¯¯å¤„ç†ä¸æ¢å¤

#### ğŸ”§ è‡ªåŠ¨æ¢å¤æœºåˆ¶
```typescript
interface RecoveryConfig {
  enableAutoBackup: boolean;          // å¯ç”¨è‡ªåŠ¨å¤‡ä»½
  backupInterval: number;             // å¤‡ä»½é—´éš”
  maxBackupCount: number;             // æœ€å¤§å¤‡ä»½æ•°é‡
  enableAutoRollback: boolean;        // å¯ç”¨è‡ªåŠ¨å›æ»š
  rollbackThreshold: number;          // å›æ»šé˜ˆå€¼
}
```

#### ğŸ“Š æ•…éšœè½¬ç§»ç­–ç•¥
```typescript
interface FailoverStrategy {
  primary: string;                    // ä¸»ç³»ç»Ÿ
  secondary: string;                  // å¤‡ç”¨ç³»ç»Ÿ
  healthCheckInterval: number;        // å¥åº·æ£€æŸ¥é—´éš”
  failoverThreshold: number;          // æ•…éšœè½¬ç§»é˜ˆå€¼
  recoveryTimeout: number;            // æ¢å¤è¶…æ—¶
}
```

---

## ğŸš€ æ‰©å±•ä¸ä¼˜åŒ–

### ğŸ”§ æ¨¡å—åŒ–æ‰©å±•

#### ğŸ“¦ æ’ä»¶ç³»ç»Ÿæ¶æ„
```typescript
interface PluginSystem {
  registerPlugin(plugin: Plugin): void;
  unregisterPlugin(pluginId: string): void;
  getPlugin(pluginId: string): Plugin | null;
  listPlugins(): Plugin[];
  enablePlugin(pluginId: string): void;
  disablePlugin(pluginId: string): void;
}
```

#### ğŸ¨ è‡ªå®šä¹‰é¢„è®¾ç³»ç»Ÿ
```typescript
interface CustomPresetSystem {
  createPreset(config: PresetConfig): string;
  updatePreset(presetId: string, config: Partial<PresetConfig>): void;
  deletePreset(presetId: string): void;
  exportPreset(presetId: string): string;
  importPreset(presetData: string): string;
}
```

### ğŸ¯ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### âš¡ æ¸²æŸ“ä¼˜åŒ–
```typescript
interface RenderOptimization {
  enableLOD: boolean;                 // å¯ç”¨ç»†èŠ‚å±‚æ¬¡
  enableFrustumCulling: boolean;      // å¯ç”¨è§†é”¥å‰”é™¤
  enableOcclusionCulling: boolean;    // å¯ç”¨é®æŒ¡å‰”é™¤
  enableInstancing: boolean;          // å¯ç”¨å®ä¾‹åŒ–
  enableGPUParticles: boolean;        // å¯ç”¨GPUç²’å­
}
```

#### ğŸ§  AIä¼˜åŒ–
```typescript
interface AIOptimization {
  enablePredictiveLoading: boolean;   // å¯ç”¨é¢„æµ‹åŠ è½½
  enableAdaptiveQuality: boolean;     // å¯ç”¨è‡ªé€‚åº”è´¨é‡
  enableSmartCaching: boolean;        // å¯ç”¨æ™ºèƒ½ç¼“å­˜
  enableLearningOptimization: boolean; // å¯ç”¨å­¦ä¹ ä¼˜åŒ–
}
```

---

## ğŸ“š æ€»ç»“ä¸å±•æœ›

### ğŸ¯ ç³»ç»Ÿä¼˜åŠ¿
1. **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„å±‚æ¬¡ç»“æ„å’Œæ¥å£å®šä¹‰
2. **æ™ºèƒ½æ§åˆ¶**: åŸºäºæƒ…ç»ªçš„æ™ºèƒ½éšæœºæ€§å’Œé¢„è®¾æ¨è
3. **æ€§èƒ½ä¿æŠ¤**: è‡ªåŠ¨æ€§èƒ½ç›‘æ§å’Œé™çº§ä¿æŠ¤
4. **æ‰©å±•æ€§**: æ’ä»¶åŒ–æ¶æ„æ”¯æŒè‡ªå®šä¹‰æ‰©å±•
5. **ç¨³å®šæ€§**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### ğŸ”® å‘å±•æ–¹å‘
1. **æ·±åº¦å­¦ä¹ **: é›†æˆæœºå™¨å­¦ä¹ æ¨¡å‹æå‡æ¨èå‡†ç¡®æ€§
2. **å®æ—¶åä½œ**: æ”¯æŒå¤šç”¨æˆ·å®æ—¶åä½œåˆ›ä½œ
3. **äº‘ç«¯åŒæ­¥**: äº‘ç«¯é¢„è®¾åº“å’Œç”¨æˆ·åå¥½åŒæ­¥
4. **è·¨å¹³å°**: æ”¯æŒWebã€ç§»åŠ¨ç«¯ã€æ¡Œé¢ç«¯
5. **å¼€æ”¾ç”Ÿæ€**: ç¬¬ä¸‰æ–¹å¼€å‘è€…æ’ä»¶ç”Ÿæ€

### ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’
1. **å®Œå–„æ–‡æ¡£**: è¡¥å……APIæ–‡æ¡£å’Œå¼€å‘æŒ‡å—
2. **æ€§èƒ½æµ‹è¯•**: è¿›è¡Œå…¨é¢çš„æ€§èƒ½åŸºå‡†æµ‹è¯•
3. **ç”¨æˆ·æµ‹è¯•**: æ”¶é›†ç”¨æˆ·åé¦ˆå’Œä¼˜åŒ–å»ºè®®
4. **åŠŸèƒ½æ‰©å±•**: å®ç°æ›´å¤šé¢„è®¾å’Œæ•ˆæœç±»å‹
5. **ç¤¾åŒºå»ºè®¾**: å»ºç«‹å¼€å‘è€…ç¤¾åŒºå’Œè´¡çŒ®æŒ‡å—

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-26  
**ç»´æŠ¤è€…**: AIåŠ©æ‰‹  
**çŠ¶æ€**: å·²å®ŒæˆåŸºç¡€æ¢³ç†ï¼Œå¾…è¿›ä¸€æ­¥ä¼˜åŒ–
